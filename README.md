# Модуль трансляции растровых интерактивных изображений в систему виртуальной реальности
## Описание с сайта СПбГУ
Система виртуальной реальности (СВР, программно-аппаратный комплекс) – часть тренажерного комплекса, моделирующего сложный технологический объект (СТО), предназначенная для подготовки оперативного персонала. СВР обеспечивает функционал: - перемещения по 3D-моделям помещений СТО; - изучения расположение помещений СТО и оборудования в них; - получения справочной информации об оборудовании; - взаимодействия с 3D-моделями оборудования (нажатие кнопок, повороты ключей, штурвалов, наблюдение показаний приборов); - управления оборудованием и наблюдения результатов управления посредством технологических схем (2D-схем технологических систем, образованных анимированными мнемознаками оборудования). Последняя функциональная возможность требует обеспечить трансляцию последовательности изображений (снимков) технологических схем в СВР и передачу событий ввода в обратном направлении. Цель проекта: Пусть клиент отображения результатов счета расчетной задачи моделирующего комплекса запущен локально или удаленно по отношению к СВР. Т.е. локально или удаленно запущено приложение, отображающее анимированную технологическую схему. Тогда Модуль трансляции передает последовательность снимков выбранного экрана рабочего стола данного ПК в направлении СВР и принимает события ввода (нажатия левой и правой кнопок мыши) в обратном направлении. Таким образом, отображение технологической схемы и взаимодействие с ней может осуществляться внутри СВР без снятия ВР-оборудования (ВР-очков и контроллеров ввода). Частота отображения графической информации на стороне СВР ограничена снизу – она должна быть достаточной для того, чтобы пользователь имел возможность взаимодействовать с технологической схемой: нажимать на мнемознаки и кнопки (наблюдая, к примеру, утапливание кнопки), поворачивать ключи, наблюдать изменение засветки мнемознаков, цвета ламп и пр. При этом такая частота, скорее всего, будет недостаточной для передачи таким образом потокового видео. В рамках данного проекта Система ВР дана в виде 3D-сцены с набором графических объектов с частично реализованным динамическим поведением. В пределах сцены должен располагаться примитив, динамически (по срабатыванию таймера) отображающий растровое изображение, возвращаемое Модулем трансляции по запросу из СВР. Нажатия мышью в области примитива должны передаваться Модулю трансляции. Запрос изображения и передача событий ввода на стороне СВР должны быть реализованы в виде UE-плагинов. Основные функции Модуля трансляции: - передача снимков выбранного экрана рабочего стола в направлении СВР; - прием событий ввода в направлении от СВР. Параметры работы Модуля трансляции (должны задаваться через пользовательский графический интерфейс): - частота ""съемки"" экрана; - всевозможные настройки ""съемки"" (при наличии), влияющие на качество изображения, а, значит, и на быстродействие передачи и частоту отображения в СВР; - номер экрана рабочего стола. Разработать и реализовать: - концепцию работы Модуля трансляции (интерфейсы составных частей программы, структуры данных, алгоритмы); - реализовать пользовательский графический интерфейс; - реализовать обмен данными между клиентом (сценой ВР) и сервером (модулем трансляции).
## Техническое задание
Реализовать схему из UE-плагина и модуля трансляции изображений, первый подключен в тренажере виртуальной реальности на одном компьютере, второй может находится либо на том же компьютере, либо на отдельном в сети.
На сцене в тренажере присутствует примитив - объект которой имеет динамическую текстуру и способен принимать в своей области события ввода (ЛКМ/ПКМ). UE-плагин соответственно отправляет запросы на получение изображения, текстуры, которую нужно применить к примитиву, а также события ввода, произведенные в зоне примитива. Модуль трансляции принимает эти запросы, воспроизводит на компьютере, на котором он запущен, соответственные события ввода, и отправляет (по запросу) изображения рабочего стола компьютера.
Модуль трансляции имеет графический интерфейс, с настройкой частотой передачи изображений (а разве не плагин, так как он передает запросы на получение изображения)
Коммуникация между модулем трансляции и плагином должны осуществляться с помощью симметрично установленными открытыми файловыми дескрипторами, при этом при передаче информации дескриптор нужно блокировать, и не забывать сбрасывать буфер
## Роли
- Разработка UE-плагина (1/2 человека) -
- Разработка Модуля трансляции (бек +UI) (2 человека) -
- Разработка коммуникации с помощью дескрипторов -
- Тестирование (1 человек) -
## Структура проекта
```text
project/
├── ue/                    # Unreal Engine проект
│   ├── Content/           # Ассеты
│   └── Plugins/           # Плагин
│
├── backend/               # Бекенд
│   
├── gui/                   # Графический интерфейс
│
├── .gitignore
└── README.md
```
